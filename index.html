<!-- index.html -->
<!DOCTYPE html>
<html>
<body>
    <script src="https://cdn.jsdelivr.net/npm/@assemblyscript/loader/umd/index.js"></script>
    <div id="main"></div>
    <script src="/js/loader.js"></script>
    <script>
      const WL = new WasmLoader();
      WL.wasm('/build/optimized.wasm')
        .then(instance => {
          // First task
          const { fizzbuzz, __getString } = instance
          // __getString - helper from the lib
          // because just fizzbuzz(3) would return a
          // POINTER to the start of the MEMORY CHUNK
          const str = __getString(fizzbuzz(3))
          document.write(str)
          document.write('<br>')

          // Second task
          const { readMemory, memory } = instance
          const memoryArray = new Uint8Array(memory.buffer)
          document.write(memoryArray[1])
          document.write('<br>')

          memoryArray[2] = 42 // write directly to the memory
          document.write(readMemory(2)) // read the 42 value which we just wrote to the memory
        })
    </script>
</body>
</html>
